View(iex)
tail(iex)
removeComma= function(s) {gsub(",", "", s, fixed = TRUE)}
iexwc = lapply(iex,  removeComma)
tail(iexwc)
tail(iexwc)
str(iexwc)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iexwc)
iex$Date <- as.Date(iexwc$Date, format ="%d-%b-%y")
str(iexwc)
iex <- rbind( IM, IA)
str(iex)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
View(iex)
tail(iex)
removeComma= function(s) {gsub(",", "", s, fixed = TRUE)}
iexwc = lapply(iex,  removeComma)
str(iexwc)
str(iex)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s, fixed = TRUE)}
iexwc = lapply(iex$Exports,  removeComma)
str(iexwc)
?gsub
?lapply
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s, fixed = TRUE)}
iexwc = sapply(iex$Exports,  removeComma)
str(iexwc)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s, fixed = TRUE)}
iexwc = lapply(iex$Exports,  removeComma)
str(iexwc)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s, fixed = TRUE)}
iexwc = lapply(iex$Exports,  removeComma, simplify=F)
str(iexwc)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s, fixed = TRUE)}
lapply(iex$Exports,  removeComma, simplify=F)
lapply(iex$Exports,  removeComma)
str(iex)
removeComma= function(s) {gsub(",", "", s, fixed = TRUE)}
zz <- lapply(iex$Exports,  removeComma)
str(iex)
tail(iex)
tail(zz)
lapply(iex$Exports,  removeComma)
str(iex)
tail(iex)
zz <- lapply(iex,  removeComma)
str(iex)
tail(iex)
str(zz)
tail(zz)
str(zz)
zz$Date <- as.Date(zz$Date, format ="%d-%b-%y")
str(zz)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s)}
zz <- lapply(iex,  removeComma)
str(iex)
str(zz)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s)}
zz <- lapply(iex$Exports,  removeComma)
str(zz)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s)}
zz <- apply(iex$Exports,  removeComma)
str(zz)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s)}
zz <- apply(iex$Exports,  removeComma, FIXED=T, StringasAsFactors = F)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s)}
zz <- apply(iex$Exports,  removeComma, FIXED=T,stringsAsFactors = FALSE)
zz <- lapply(iex$Exports,  removeComma, FIXED=T,stringsAsFactors = FALSE)
zz <- lapply(iex$Exports,  removeComma, fiexd=T,stringsAsFactors = FALSE)
zz <- lapply(iex$Exports,  removeComma, fixed=T,stringsAsFactors = FALSE)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
removeComma= function(s) {gsub(",", "", s,fixed = TRUE)}
# sWithoutCommas = gsub(",", "", s, fixed = TRUE)
zz <- lapply(iex$Exports,  removeComma, stringsAsFactors = FALSE)
removeComma= function(s) {gsub(",", "", s,fixed = TRUE, stringsAsFactors = FALSE)}
zz <- lapply(iex$Exports,  removeComma)
zz <- lapply(iex,  removeComma)
removeComma= function(s) {gsub(",", "", s,fixed = TRUE)}
# sWithoutCommas = gsub(",", "", s, fixed = TRUE)
zz <- lapply(iex,  removeComma)
str(iex)
str(zz)
zz$Date <- as.Date(zz$Date, format ="%d-%b-%y")
str(zz)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
zz <- apply(apply(iex, 2, gsub, patt=",", replace=""), 2, as.numeric)
str(zz)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
zz <- apply(apply(iex$Exports, 2, gsub, patt=",", replace=""), 2, as.numeric)
zz <- apply(iex$Exports, 2, gsub, patt=",", replace="")
zz <- lapply(iex$Exports, 2, gsub, patt=",", replace="")
zz <- lapply(iex$Exports, gsub, patt=",", replace="")
str(zz)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
zz <- lapply(iex, gsub, patt=",", replace="")
tail(zz)
str(zz)
str(iex)
zz <- lapply(iex[,3:4], gsub, patt=",", replace="")
str(zz)
xx <- iex[,3:4]
head(xx)
tail(xx)
zz <- lapply(xx], gsub, patt=",", replace="")
zz <- lapply(xx, gsub, patt=",", replace="")
head(zz)
x1 <- iex[,3]
x2 <- iex[,4]
head(x1)
x1 <- iex[,3]
x2 <- iex[,4]
head(x1)
tail(x2)
z1 <- lapply(x1, gsub, patt=",", replace="")
z2  <- lapply(x2, gsub, patt=",", replace="")
head(z1)
tail(22)
z1 <- apply(x1, gsub, patt=",", replace="")
z2  <- apply(x2, gsub, patt=",", replace="")
z1 <- apply(x1,2, gsub, patt=",", replace="")
head(x1)
tail(x2)
z1 <- sapply(x1, gsub, patt=",", replace="")
z2  <- sapply(x2, gsub, patt=",", replace="")
head(z1)
tail(z2)
z1 <- vapply(x1, gsub, patt=",", replace="")
z1 <- apply(x1, gsub, patt=",", replace="")
?apply
z1 <- apply(x1,1, gsub, patt=",", replace="")
z1 <- apply(x1,2, gsub, patt=",", replace="")
?read.table
?read.csv
z2  <- sapply(x2,1, gsub, patt=",", replace="")
tail(z2)
head(z2)
str(z2)
z1 <- apply(x1,2, gsub, patt=",", replace="")
z1 <- apply(x1, gsub, patt=",", replace="")
head(x1)
tail(x1)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
x1 <- iex[,3]
x2 <- iex[,4]
head(x1)
tail(x1)
head(x2)
tail(x2)
z2  <- apply(x2,1, gsub, patt=",", replace="")
z2  <- apply(x2,2, gsub, patt=",", replace="")
str(z2)
z2  <- sapply(x2,2, gsub, patt=",", replace="")
z2  <- sapply(x2, gsub, patt=",", replace="")
str(z2)
tail(z2)
z2  <- apply(sapply(x2, gsub, patt=",", replace=""), 2, as.numeric)
z2  <- apply(sapply(x2, gsub, patt=",", replace=""), 1, as.numeric)
z2  <- sapply(sapply(x2, gsub, patt=",", replace=""), 1, as.numeric)
z2  <- sapply(sapply(x2, gsub, patt=",", replace=""), as.numeric)
str(z2)
tail(z2)
unname(z2)
z2 <- unname(z2)
tail(z2)
?cbind
x1 <- iex[,3]
x2 <- iex[,4]
z1 <- sapply(apply(x1, gsub, patt=",", replace=""), as.numeric)
z2  <- sapply(sapply(x2, gsub, patt=",", replace=""), as.numeric)
z1 <- sapply(sapply(x1, gsub, patt=",", replace=""), as.numeric)
str(z2)
tail(z2)
z2  <- sapply(sapply(x2, gsub, patt=",", replace=""), as.numeric)
str(z2)
z2 <- unname(z2)
head(z1)
tail(z2)
head(x1)
tail(x1)
head(x2)
tail(x2)
z1 <- unname(sapply(sapply(x1, gsub, patt=",", replace=""), as.numeric))
z2  <- unname(sapply(sapply(x2, gsub, patt=",", replace=""), as.numeric))
str(z2)
head(z1)
tail(z2)
yy <- cbind(iex,z1)
str(yy)
yy <- cbind(iex,Exports1=z1)
View(yy)
tail(yy)
yy <- cbind(iex,Imports1=z1, Exports2=z2)
View(yy)
View(yy)
tail(yy)
str(yy)
keeps <- C(Date, Hour, Imports1, Exports2)
keeps <- C("Date", "Hour", "Imports1", "Exports2")
myCols <- C("Date", "Hour", "Imports1", "Exports2")
myCols <- c("Date", "Hour", "Imports1", "Exports2")
zz <- yy[myCols]
str(zz)
rename(zz, c("Imports1"="Imports", "Exports2"="Exports"))
require(plyr)
rename(zz, c("Imports1"="Imports", "Exports2"="Exports"))
mm <- rename(zz, c("Imports1"="Imports", "Exports2"="Exports"))
View(mm)
rm (mm)
zz <- rename(zz, c("Imports1"="Imports", "Exports2"="Exports"))
View(zz)
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
x1 <- iex[,3] # Imports
x2 <- iex[,4] # Exports
# Clue on removing commas came from here:
# https://stat.ethz.ch/pipermail/r-help/2008-January/152350.html
z1 <- unname(sapply(sapply(x1, gsub, patt=",", replace=""), as.numeric))
z2  <- unname(sapply(sapply(x2, gsub, patt=",", replace=""), as.numeric))
yy <- cbind(iex,Imports1=z1, Exports1=z2)
str(yy)
myCols <- c("Date", "Hour", "Imports1", "Exports2")
str(yy)
myCols <- c("Date", "Hour", "Imports1", "Exports2")
iex <- yy[myCols]
str(yy)
str(yy)
myCols <- c("Date", "Hour", "Imports1", "Exports2")
iex <- yy[myCols]
iex <- yy[,myCols]
yy <- yy[myCols]
str(yy)
iex <- yy[,myCols]
myCols
iex <- yy[myCols]
myCols <- c("Date","Hour","Imports1","Exports2")
myCols
iex <- yy[myCols]
zz <- yy[myCols]
str(yy)
myCols <- c("Date","Hour","Imports1","Exports2")
myCols
zz <- yy[myCols]
yy <- cbind(iex,Imports1=z1, Exports1=z2)
View(yy)
View(yy)
str(yy)
myCols <- c("Date","Hour","Imports1","Exports2")
myCols
zz <- yy[myCols]
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
x1 <- iex[,3] # Imports
x2 <- iex[,4] # Exports
# Clue on removing commas came from here:
# https://stat.ethz.ch/pipermail/r-help/2008-January/152350.html
z1 <- unname(sapply(sapply(x1, gsub, patt=",", replace=""), as.numeric))
z2  <- unname(sapply(sapply(x2, gsub, patt=",", replace=""), as.numeric))
yy <- cbind(iex,Imports1=z1, Exports1=z2)
str(yy)
myCols <- c("Date","Hour","Imports1","Exports2")
myCols
zz <- yy[myCols]
zz <- yy[,myCols]
zz <- yy[myCols,]
str(zz)
zz <- yy[myCols]
zz <- yy["Date","Hour","Imports1","Exports2"]
myCols <- c("Date","Hour","Imports1","Exports1")
zz <- yy[myCOls]
str(yy)
myCols <- c("Date","Hour","Imports1","Exports1")
myCols
zz <- yy[myCOls]
zz <- yy[myCols]
str(zz)
iex <- rename(iex, c("Imports1"="Imports", "Exports2"="Exports"))
iex <- yy[myCols]
str(zz)
iex <- rename(iex, c("Imports1"="Imports", "Exports2"="Exports"))
iex <- rename(iex, c("Imports1"="Imports", "Exports1"="Exports"))
iex <- rbind( IM, IA)
iex$Date <- as.Date(iex$Date, format ="%d-%b-%y")
str(iex)
x1 <- iex[,3] # Imports
x2 <- iex[,4] # Exports
# Clue on removing commas came from here:
# https://stat.ethz.ch/pipermail/r-help/2008-January/152350.html
z1 <- unname(sapply(sapply(x1, gsub, patt=",", replace=""), as.numeric))
z2  <- unname(sapply(sapply(x2, gsub, patt=",", replace=""), as.numeric))
yy <- cbind(iex,Imports1=z1, Exports1=z2)
str(yy)
myCols <- c("Date","Hour","Imports1","Exports1")
myCols
iex <- yy[myCols]
str(zz)
iex <- rename(iex, c("Imports1"="Imports", "Exports1"="Exports"))
str(iex)
rm(IA,IA,yy,z1,z2)
rm(x1,x2,z1,z2)
rm(IA,IA,yy)
HOEP_Master <- "http://ieso.ca/imoweb/pubs/marketReports/download/HOEP-20150102.csv"
hoep <- read.table(textConnection(getURL(HOEP_Master)) , header=T, sep=",", stringsAsFactors = FALSE)
str(hoep)# Date = chr hour = int, hoep=num
hoep$Date <- as.Date(hoep$Date, format ="%d-%b-%y")#"%m/%d/%Y")
i <- sapply(hoep, is.numeric)
hoep[i] <- lapply(hoep[i], as.numeric)
str(hoep)
WIND_Master <- "http://ieso.ca/imoweb/pubs/marketReports/download/HourlyWindFarmGen_20150102.csv"
WM <- read.table(textConnection(getURL(WIND_Master)) , header=T, sep=",", stringsAsFactors = FALSE)
str(WM) # date is chr -- rest is int. Must set NA's to Zero
WM[is.na(WM)] <- 0
str(WM) # date is chr -- rest is int. Must set NA's to Zero
WM <- read.table(textConnection(getURL(WIND_Master)) , header=T, sep=",", stringsAsFactors = FALSE)
str(WM) # date is chr -- rest is int. Must set NA's to Zero
WM$Date <- as.Date(WM$Date, format ="%d-%b-%y")
str(WM)
WM[is.na(WM)] <- 0
i <- sapply(WM, is.numeric)
WM[i] <- lapply(WM[i], as.numeric)
str(WM) # date is chr -- rest is int. Must set NA's to Zero
myDrive <- "J:"
myDir <- "/environment/Ont-Power"
myPwd <- paste(myDrive, myDir, sep="")
myPwd
setwd(myPwd)
getwd()
myPwd <- paste(myDrive, myDir, sep="")
myPwd
setwd(myPwd)
myDrive <- "J:"
myDir <- "/Ont-Power"
myPwd <- paste(myDrive, myDir, sep="")
myPwd
setwd(myPwd)
getwd()
source"Main.R)"
source("Main.R)"
source("Main.R")
source("Main.R")
source("Main.R")
View(hoep)
View(hrd)
View(iex)
View(wind)
head(hrd)
head(iex)
head(hoep)
hrd$TotWindMWh   <- 0
str(hrd)
www <- wind[1:3]
str(www)
www <- rename(www, c("Total.Wind..MWh."="TotWindMWh")
)
str(www)
total < merge(hrd,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
total <- merge(hrd,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
str(total)
rm(total)
str(www)
str(hrd)
names(hrd)
hrd1 <- hrd[hrd$Date < "2006-03-01,]
str(hrd)
hrd1 <- hrd[hrd$Date < "2006-03-01",]
View(hrd1)
View(www)
View(hrd1)
total <- merge(hrd,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
str(total)
str(hrd1)
str(www)
str(hrd)
hrd <- hrd[1:4]
str(hrd)
total <- merge(hrd,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
str(total)
str(hrd1)
tail(hrd1)
rbind(hrd1,total)
final <- rbind(hrd1,total)
str(final)
tail(final)
View(total)
View(total)
total1 <- merge(hrd,hoep, by=c("Date","Hour"), stringsAsFactors = FALSE)
total < merge(total1,iex, by=c("Date","Hour"), stringsAsFactors = FALSE)
total1 <- merge(hrd,hoep, by=c("Date","Hour"), stringsAsFactors = FALSE)
total <- merge(total1,iex, by=c("Date","Hour"), stringsAsFactors = FALSE)
print ("Done Getting files")
print("Combining Files")
hrd1 <- hrd[hrd$Date < "2006-03-01",]
hrd1$TotWindMWh   <- 0
View(hrd1)
www <- wind[1:3]
total <- merge(hrd,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
final <- rbind(hrd1,total)
View(hrd1)
View(www)
wind <- rename(wind, c("Total.Wind..MWh."="TotWindMWh")
wind <- rename(wind, c("Total.Wind..MWh."="TotWindMWh"))
str(wind) # date is chr -- rest is int. Must set NA's to Zero
wind <- rename(wind, c("Total.Wind..MWh."="TotWindMWh"))
str(wind) # date is chr -- rest is int. Must set NA's to Zero
total1 <- merge(hrd,hoep, by=c("Date","Hour"), stringsAsFactors = FALSE)
total <- merge(total1,iex, by=c("Date","Hour"), stringsAsFactors = FALSE)
#names(total)<-c("TotWindMWh")
print ("Done Getting files")
print("Combining Files")
hrd1 <- hrd[hrd$Date < "2006-03-01",]
hrd1$TotWindMWh   <- 0
www <- wind[1:3]
total <- merge(hrd,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
final <- rbind(hrd1,total)
View(www)
View(final)
tail(final)
View(iex)
total1 <- merge(hrd,hoep, by=c("Date","Hour"), stringsAsFactors = FALSE)
total <- merge(total1,iex, by=c("Date","Hour"), stringsAsFactors = FALSE)
View(total1)
View(total)
total1 <- merge(hrd,hoep, by=c("Date","Hour"), stringsAsFactors = FALSE)
total <- merge(total1,iex, by=c("Date","Hour"), stringsAsFactors = FALSE)
str(total)
totalf <- total[hrd$Date < "2006-03-01",]
View(totalf)
tail(totalf)
www <- wind[1:3]
final1 <- merge(totalf,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
View(final1)
View(final1)
final1 <- merge(total,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
View(final1)
final <- rbind(totalf,final1l)
View(final)
tail(final)
total1 <- merge(hrd,hoep, by=c("Date","Hour"), stringsAsFactors = FALSE)
total <- merge(total1,iex, by=c("Date","Hour"), stringsAsFactors = FALSE)
View(total)
View(totalf)
s
str(total)
totalf <- total[total$Date < "2006-03-01",]
totalf$TotWindMWh   <- 0
str(totalf)
www <- wind[1:3]
final1 <- merge(totalf,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
www <- wind[1:3]
final1 <- merge(total,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
View(final1)
final <- rbind(totalf,final1l)
final1 <- merge(total,www, by=c("Date","Hour"), stringsAsFactors = FALSE)
final <- rbind(totalf,final1l)
final <- rbind(totalf,final1)
head(final)
tail(final)
str(final)
str(wind)
View(wind)
finala <- cbind(final, ym = (year(final$Date) + month(final$Date)/100 ),yw = (year(final$Date) + week(twa$Date)/100 ) , year = year(final$Date), month = format(month(final$Date),digits=2),  day = day(final$Date), week = week(final$Date))
require(lubridate)
finala <- cbind(final, ym = (year(final$Date) + month(final$Date)/100 ),yw = (year(final$Date) + week(twa$Date)/100 ) , year = year(final$Date), month = format(month(final$Date),digits=2),  day = day(final$Date), week = week(final$Date))
finala <- cbind(final, ym = (year(final$Date) + month(final$Date)/100 ),yw = (year(final$Date) + week(final$Date)/100 ) , year = year(final$Date), month = format(month(final$Date),digits=2),  day = day(final$Date), week = week(final$Date))
View(finala)
View(finala)
tail(finala)
head(finala)
